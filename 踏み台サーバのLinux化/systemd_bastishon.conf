# ================================
# systemd 自動ポートフォワード設定
# ================================

# Windows1 用
# /etc/systemd/system/ssh-rdp-win1.service
[Unit]
Description=RDP Forward to Windows1
After=network.target

[Service]
ExecStart=/usr/bin/ssh -N -o ServerAliveInterval=60 -o ServerAliveCountMax=3 -R 23389:localhost:3389 Administrator@WIN1-IP
Restart=always

[Install]
WantedBy=multi-user.target


# Windows2 用
# /etc/systemd/system/ssh-rdp-win2.service
[Unit]
Description=RDP Forward to Windows2
After=network.target

[Service]
ExecStart=/usr/bin/ssh -N -o ServerAliveInterval=60 -o ServerAliveCountMax=3 -R 23390:localhost:3389 Administrator@WIN2-IP
Restart=always

[Install]
WantedBy=multi-user.target


# Windows3 用
# /etc/systemd/system/ssh-rdp-win3.service
[Unit]
Description=RDP Forward to Windows3
After=network.target

[Service]
ExecStart=/usr/bin/ssh -N -o ServerAliveInterval=60 -o ServerAliveCountMax=3 -R 23391:localhost:3389 Administrator@WIN3-IP
Restart=always

[Install]
WantedBy=multi-user.target


# ------------ 有効化コマンド ------------
# systemctl daemon-reload
# systemctl enable --now ssh-rdp-win1.service
# systemctl enable --now ssh-rdp-win2.service
# systemctl enable --now ssh-rdp-win3.service
